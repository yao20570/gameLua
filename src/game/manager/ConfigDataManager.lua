
ConfigData = {}

--新的配置表名称 在这里定义
ConfigData.ChapterConfig = "ChapterConfig"
ConfigData.EventConfig = "EventConfig"
ConfigData.ItemConfig = "ItemConfig"
ConfigData.ZhenfaConfig = "ZhenfaConfig"
ConfigData.ModelGroConfig = "ModelGroConfig"
ConfigData.ArmProductConfig = "ArmProductConfig"
ConfigData.ResourceConfig = "ResourceConfig"
ConfigData.BuildOpenConfig = "BuildOpenConfig"
ConfigData.BuildFunctionConfig = "BuildFunctionConfig"
ConfigData.BuildResourceConfig = "BuildResourceConfig"
ConfigData.FightMeticConfig = "FightMeticConfig"
ConfigData.FightShowConfig = "FightShowConfig"
ConfigData.BuildSheetConfig = "BuildSheetConfig"
ConfigData.BuildBlankConfig = "BuildBlankConfig"
ConfigData.ArmKindsConfig = "ArmKindsConfig"  --佣兵
ConfigData.ArmRemouldConfig = "ArmRemouldConfig" --太学院
ConfigData.BuffConfig = "BuffConfig"
ConfigData.WarriorProConfig = "WarriorProConfig"
ConfigData.WarriorsConfig = "WarriorsConfig"
ConfigData.SuitsConfig = "SuitsConfig"
ConfigData.ChatFaceConfig = "ChatFaceConfig"
ConfigData.ScienceLvConfig = "ScienceLvConfig"
ConfigData.FillListConfig = "FillListConfig"
ConfigData.ErrorCodeConfig = "ErrorCodeConfig" --错误码配置
ConfigData.OrdnanceConfig = "OrdnanceConfig"
ConfigData.OrdnancePartConfig = "OrdnancePartConfig"  --配件
ConfigData.OrdnancePieceConfig = "OrdnancePieceConfig" --
ConfigData.OrdnanceRemConfig = "OrdnanceRemConfig"
ConfigData.OrdnanceStrConfig = "OrdnanceStrConfig"
ConfigData.AdvanceRemouldConfig = "AdvanceRemouldConfig"
ConfigData.MainMissionConfig = "MainMissionConfig"
ConfigData.DayMissionConfig = "DayMissionConfig"
ConfigData.DayActiveConfig = "DayActiveConfig"
ConfigData.SkillConfig = "SkillConfig"
ConfigData.SkillLevelConfig = "SkillLevelConfig"
ConfigData.PrestigeGiveConfig = "PrestigeGiveConfig"
ConfigData.MilitaryRankConfig = "MilitaryRankConfig"
ConfigData.BoomLevelConfig = "BoomLevelConfig"
ConfigData.PrestigeLvConfig = "PrestigeLvConfig"
ConfigData.CommandLvConfig = "CommandLvConfig"
ConfigData.CommanderConfig = "CommanderConfig"
ConfigData.ActiveRewardConfig = "ActiveRewardConfig"
ConfigData.FixRewardConfig = "FixRewardConfig"
ConfigData.CounsellorConfig = "CounsellorConfig"
ConfigData.CounsellorSkillConfig = "CounsellorSkillConfig"
ConfigData.CounsellorLvupConfig = "CounsellorLvupConfig"
ConfigData.CounsellorAdcostConfig = "CounsellorAdcostConfig"
ConfigData.InteriorConfig = "InteriorConfig"
ConfigData.ResourcePointConfig = "ResourcePointConfig"
ConfigData.ShopConfig = "ShopConfig"
ConfigData.MuseumConfig = "MuseumConfig"
ConfigData.HeadPortraitConfig = "HeadPortraitConfig"
ConfigData.PendantConfig = "PendantConfig"
ConfigData.FightValueConfig = "FightvalueConfig"
ConfigData.FightControlConfig = "FightControlConfig"
ConfigData.VipDataConfig = "VipDataConfig" -- vip特权表
ConfigData.VipSupplyConfig = "VIPSupplyConfig" --vip特供
ConfigData.SupplyRewardConfig = "SupplyRewardConfig" --vip特供奖励
ConfigData.BuffMessageConfig = "BuffMessageConfig"
ConfigData.HelperConfig = "HelperConfig"
ConfigData.ArenaRewardConfig = "ArenaRewardConfig"
ConfigData.FlyGoodsConfig = "FlyGoodsConfig"        --需要飘窗的物品
ConfigData.NoFlyModuleConfig = "NoFlyModuleConfig"  --不飘窗的模块
ConfigData.ResourcePointConfig = "ResourcePointConfig"  --世界资源点配置
ConfigData.ArenaShopConfig = "ArenaShopConfig"
ConfigData.DayLandConfig = "DayLandConfig"  --开服礼包(30天登陆)
ConfigData.LegionScienceConfig = "LegionScienceConfig"  --军团科技
ConfigData.LegionLevelConfig = "LegionLevelConfig"      --科技升级
ConfigData.LegionShareConfig = "LegionShareConfig"      --军团分享
ConfigData.ResContributeConfig = "ResContributeConfig"  --资源捐赠
ConfigData.GoldContibuteConfig = "GoldContibuteConfig"  --金币捐赠
ConfigData.WelfareRewardConfig = "WelfareRewardConfig"  --军团福利院福利表
ConfigData.WelfareLvConfig = "WelfareLvConfig"          --同盟福利院等级配置表
ConfigData.LegActMissionConfig = "LegActMissionConfig"  --军团福利院活跃任务表
ConfigData.LegionActiveConfig = "LegionActiveConfig"    --军团福利院活跃度表
ConfigData.LegionFixShopConfig = "LegionFixShopConfig"    --军团商店固定表
ConfigData.LegionRandShopConfig = "LegionRandShopConfig"    --军团商店随机表
ConfigData.AdventureEventConfig = "AdventureEventConfig"
ConfigData.AdventureConfig = "AdventureConfig"
ConfigData.FunctionOpenConfig = "FunctionOpenConfig" --功能开启表
ConfigData.ChargeGoodsConfig = "ChargeGoodsConfig"  --充值商品表
ConfigData.ItemMadeConfig = "ItemMadeConfig"  --工匠坊
ConfigData.PreLoadConfig = "PreLoadConfig" --预加载配置
ConfigData.LevelLoadConfig = "LevelLoadConfig" --等级预加载配置
ConfigData.ChargeConfig = "ChargeConfig" --充值配表
ConfigData.LaBaRewardConfig = "LaBaRewardConfig" --拉霸配置表
ConfigData.LaBaShowRewardConfig = "LaBaShowRewardConfig" --拉霸奖励表
ConfigData.LegionCapterConfig = "LegionCapterConfig"    --军团试炼场 章节
ConfigData.LegionEventConfig = "LegionEventConfig"    --军团试炼场 关卡
ConfigData.RedBagConfig = "RedBagConfig"    --红包派送
ConfigData.OrdnanceForgingConfig = "OrdnanceForgingConfig"  --军械神将的价格表
ConfigData.OrdnanceRewardConfig = "OrdnanceRewardConfig"  --军械神将的20个奖励
ConfigData.ORankingRewardConfig = "ORankingRewardConfig"  --军械神将排行榜奖励表
ConfigData.CoronaConfig = "CoronaConfig"  --每日转盘信息表
ConfigData.CurrentRewardConfig = "CurrentRewardConfig"  --每日转盘奖励表
ConfigData.CRankingRewardConfig = "CRankingRewardConfig"  --每日转盘排行榜奖励表
ConfigData.CurrentRankingConfig = "CurrentRankingConfig" --活动排行榜数据表
ConfigData.SmashEggConfig = "SmashEggConfig"  --金鸡砸蛋
ConfigData.CollectBlessConfig = "CollectBlessConfig"  --迎春集福
ConfigData.ItemshowConfig = "ItemshowConfig" --不弹通用提示框的模块
ConfigData.GeneralsConfig = "GeneralsConfig" --武将图鉴
ConfigData.ControlshowConfig = "ControlshowConfig" -- 物品日志控制
ConfigData.ModuleControlConfig = "ModuleControlConfig" -- 模块控制表
ConfigData.ShowControlConfig = "ShowControlConfig"  --物品飘动控制表
ConfigData.ItemflyConfig = "ItemflyConfig" --20007飘窗弹窗
ConfigData.GeneralsSoulConfig = "GeneralsSoulConfig" --武魂表
ConfigData.GeneralsExpConfig = "GeneralsExpConfig" --武将经验表
ConfigData.MonsterConfig = "MonsterConfig" --怪物表
ConfigData.BossMonsterConfig = "BossMonsterConfig" --世界boss表
ConfigData.MonsterGroupConfig = "MonsterGroupConfig" --世界boss表
ConfigData.InspireConfig = "InspireConfig" --世界boss鼓舞表
ConfigData.PanditMonsterConfig = "PanditMonsterConfig"  --剿匪副本怪物表
ConfigData.PopularsupportConfig = "PopularsupportConfig"  --民心模块
ConfigData.HeroConfig = "HeroConfig"  --英雄数据表
ConfigData.HeroLevelConfig = "HeroLevelConfig"  --英雄等级数据表
ConfigData.HeroStarConfig = "HeroStarConfig"  --英雄星级数据表
ConfigData.StrategicsConfig = "StrategicsConfig"  --英雄兵法基础表
ConfigData.StrategicsLvConfig = "StrategicsLvConfig"  --英雄兵法基础表
ConfigData.ActiveMissionConfig = "ActiveMissionConfig"  --战功任务
ConfigData.ActiveMissionRewardConfig = "ActiveMissionRewardConfig"--战功奖励
ConfigData.ActiveExpConfig = "ActiveExpConfig" --战功经验
ConfigData.FormationsConfig = "FormationsConfig"--阵法数据
ConfigData.FormationLvConfig = "FormationLvConfig"--阵法升级数据
ConfigData.NewFunctionOpenConfig = "NewFunctionOpenConfig" --新功能开启
ConfigData.HeroShowConfig = "HeroShowConfig" --新英雄开启 英雄信息显示
ConfigData.HeroGiftConfig = "HeroGiftConfig" --英雄天赋表
ConfigData.TroopsStartConfig = "TroopsStartConfig" --槽位信息
ConfigData.RoleFunctionOpenConfig = "RoleFunctionOpenConfig"  --主公功能开启
ConfigData.TreasureBaseConfig = "TreasureBaseConfig" --宝具基础数据
ConfigData.TreasureClassConfig = "TreasureClassConfig" --宝具升阶消耗
ConfigData.TreasureEnchantConfig = "TreasureEnchantConfig" --宝具属性基础
ConfigData.TreasureSophisticationConfig = "TreasureSophisticationConfig" --宝具技能属性
ConfigData.TreasurePieceConfig = "TreasurePieceConfig" --宝具碎片
ConfigData.JuniorQuConfig = "JuniorQuConfig"--科举乡试题目
ConfigData.SeniorQuConfig = "SeniorQuConfig"--科举殿试题目
ConfigData.JuniorExamConfig = "JuniorExamConfig"--科举乡试配置
ConfigData.SeniorExamConfig = "SeniorExamConfig"--科举殿试配置
ConfigData.CIntegralRewardConfig = "CIntegralRewardConfig"--科举单次积分奖励配置
ConfigData.GuideActionConfig = "GuideActionConfig"--引导回退配置
ConfigData.ActiveResConfig = "ActiveResConfig"--引导回退配置
ConfigData.CounsellorPriceConfig = "CounsellorPriceConfig"--军师抽奖价格表
ConfigData.WarBookTalent = "WarBookTalentConfig" --国策兵法：基础表
ConfigData.WarBookClass = "WarBookClassConfig" --国策兵法：阶级表
ConfigData.WarBookUpgrade = "WarBookUpgradeConfig" --国策兵法：升级表
ConfigData.WarBookParameter = "WarBookParameterConfig" --国策兵法：重设价格表
ConfigData.WarBookFightConfig = "WarBookFightConfig" -- 国策兵法：战斗表现
ConfigData.WarBookSequence = "WarBookSequenceConfig" -- 国策兵法：出手顺序
ConfigData.LegionConfig = "LegionConfig"
ConfigData.EmperorEnfeoffsConfig = "EmperorEnfeoffsConfig"
ConfigData.XiyuSpConfig = "XiyuSpConfig"   --西域远征奖励预览表
ConfigData.TitleConfig = "TitleConfig"   --西域远征奖励预览表
ConfigData.BuffShowConfig = "BuffShowConfig"   --增益BuffShow表
ConfigData.NoticeConfig = "NoticeConfig"   --公告表
ConfigData.ServiceContactConfig = "ServiceContactConfig"   --联系表
ConfigData.ArmyGoDesignConfig = "ArmyGoDesignConfig"   -- 叛军地图生成表
ConfigData.ArmyGoMonsterConfig = "ArmyGoMonsterConfig"   -- 叛军怪物表
ConfigData.ArmyGoActiveConfig = "ArmyGoActiveConfig"    -- 叛军活动配置表
ConfigData.FirecrackerConfig = "FirecrackerConfig"   --限时春节活动 爆竹酉礼
ConfigData.ExperienceReturnConfig = "ExperienceReturnConfig"   --限时春节活动 爆竹酉礼
ConfigData.DecomposeConfig = "DecomposeConfig"   --限时春节活动 爆竹酉礼
ConfigData.ShopLimiteActiveConfig = "ShopLimiteActiveConfig"    --洛阳闹市配置表
ConfigData.ShopRewardConfig = "ShopRewardConfig"    --洛阳闹市物品配置表
ConfigData.PopularMarketConfig = "PopularMarketConfig"          --洛阳闹人气商店配置表
ConfigData.BlackMarketConfig = "BlackMarketConfig"              --洛阳闹黑市商店配置表
ConfigData.SaleMarketConfig = "SaleMarketConfig"                --洛阳闹特商店卖配置表
ConfigData.MartialTeachConfig = "MartialTeachConfig" --武学讲堂奖励花费
ConfigData.MartialManageConfig = "MartialManageConfig" --武学讲堂控制
ConfigData.DayRechargeConfig = "DayRechargeConfig"  --连续充值
ConfigData.DayRewardConfig = "DayRewardConfig"  --连续充值奖励表
ConfigData.HeroPieceConfig = "HeroPieceConfig"  --武将碎片表
ConfigData.CookingWineConfig = "CookingWineConfig"  --限时活动 煮酒论英雄控制表
ConfigData.MapLockConfig = "MapLockConfig"  
ConfigData.MapGenerateConfig = "MapGenerateConfig"
ConfigData.BroadSealConfig = "BroadSealConfig"  --限时活动 国之重器控制表
ConfigData.CourteousConfig = "CourteousConfig"  -- 礼贤下士活动控制表
ConfigData.LionSoldierConfig = "LionSoldierConfig"  --雄狮转盘兵种产出表
ConfigData.LionCoronaConfig = "LionCoronaConfig"  -- 雄狮转盘活动控制表
ConfigData.TombCityConfig = "TombCityConfig"  -- 精绝古城活动控制表
ConfigData.TombMarketConfig = "TombMarketConfig"  -- 精绝古城黑市商品表

ConfigData.RechargeRebateConfig = "RechargeRebateConfig"  -- 充值返利大放送控制表
ConfigData.RechargeConditionConfig = "RechargeConditionConfig"  -- 充值返利大放送充值条件表
ConfigData.RechargeScaleConfig = "RechargeScaleConfig"  -- 充值返利大放送返利比例表
ConfigData.LegionRichMissionConfig = "LegionRichMissionConfig"  -- 同盟致富任务表
ConfigData.LegionRichConfig = "LegionRichConfig"  -- 同盟致富活动控制表
ConfigData.CommentSetConfig = "CommentSetConfig"  -- 点评参数配置表
ConfigData.CommentMoldConfig = "CommentMoldConfig"  -- 点评入口配置表
ConfigData.EmailSensitiveConfig = "EmailSensitiveConfig"  -- 邮件敏感词
ConfigData.PubDrawConfig = "PubDrawConfig"  -- 酒馆控制表
ConfigData.PubPreciConfig = "PubPreciConfig"  -- 酒馆价格表
ConfigData.DrinkChangeConfig = "DrinkChangeConfig"  -- 酒馆酒令兑换表
ConfigData.FightBranchConfig = "FightBranchConfig"  -- 战斗子类型表


ConfigData.WorldHeavyResConfig = "WorldHeavyResConfig"  -- 富矿系统配置表
ConfigData.RealNameConfig = "RealNameConfig"  -- 实名认证系统配置表
ConfigData.RealNameBuffConfig = "RealNameBuffConfig"  -- 实名认证deff表
ConfigData.WorldReCallTeamConfig = "WorldReCallTeamConfig"    -- 撤军参数配置表
ConfigData.OrdnanceShopConfig = "OrdnanceShopConfig"    -- 军械仓库晶石兑换表

ConfigData.BuildingSurfaceConfig = "BuildingSurfaceConfig"    -- 世界地图玩家外观显示配置表


ConfigData.IntervalTempConfig = "IntervalTempConfig"    --  武将等级受到主公等级限制
ConfigData.MiscellanyConfig = "MiscellanyConfig"    --  新手保护罩配表
ConfigData.MiniMapShowConfig = "MiniMapShowConfig"    --  小地图配置表
ConfigData.ChargeCardConfig = "ChargeCardConfig"    --  消费卡（周卡月卡）配置表

ConfigData.WorldHeavyResConfig = "WorldHeavyResConfig"  -- 富矿系统配置表

ConfigData.TownWarConfig = "TownWarConfig" -- 盟战州城配置表
ConfigData.TownWarMonsterConfig = "TownWarMonsterConfig" -- 郡城怪物
--ConfigData.TownWarRewardConfig = "TownWarRewardConfig" -- 郡城奖励
ConfigData.TradeConfig = "TradeConfig" -- 郡城贸易表
ConfigData.TownWarBuffConfig = "TownWarBuffConfig" -- 郡城buff
ConfigData.TownWarDebuffConfig = "TownWarDebuffConfig" -- 郡城debuff
ConfigData.TownWarFightBuffConfig = "TownWarFightBuffConfig" -- 郡城战斗buff表
ConfigData.TownWarPointRewardConfig = "TownWarPointRewardConfig" -- 郡城奖励配置
ConfigData.WorldHeavyResConfig = "WorldHeavyResConfig"  -- 富矿系统配置表

ConfigData.LegionPowerConfig = "LegionPowerConfig"  -- 同盟设置权限显示控制表
ConfigData.HeadFrameConfig = "HeadFrameConfig"  -- 同盟设置权限显示控制表

ConfigData.CityBattleSkillConfig = "CityBattleSkillConfig"    --  城主战技能配置表

ConfigData.MilitaryInstituteConfig = "MilitaryInstituteConfig"    --  升阶
ConfigData.MilitaryLevelConfig = "MilitaryLevelConfig"    --  升级
ConfigData.CityTipConfig = "CityTipConfig"  --城主战面板信息显示
ConfigData.SynthetizeConfig = "SynthetizeConfig"  --道具合成表
ConfigData.WorldMarchingConfig = "WorldMarchingConfig" -- 行军时间配置表

ConfigData.WorldSeasonConfig        = "WorldSeasonConfig"  --世界 四季
ConfigData.WorldLevelConfig         = "WorldLevelConfig"  --世界 四季 等级
ConfigData.WorldExpConfig           = "WorldExpConfig"  --世界 四季 经验
ConfigData.WorldLevelOpen           = "WorldLevelOpenConfig"  --世界 等级 开放时间
ConfigData.PlayerLvControlConfig    = "PlayerLvControlConfig"  --世界 等级 影响玩家等级上限控制表
ConfigData.WorldSeasonOpen          = "WorldSeasonOpenConfig"  --四季开放时间

ConfigData.Blank = "BlankConfig"  --地图四季空地
ConfigData.MapBg = "MapBgConfig"  --地图四季背景

ConfigData.LuckyCoronaConfig = "LuckyCoronaConfig"  --幸运转盘配置表
ConfigData.FortuneConfig = "FortuneConfig"  --招财转运配置表

ConfigData.EmperorWarConfig = "EmperorWarConfig" -- 皇城基础配置表
ConfigData.EmperorWarBuffConfig = "EmperorWarBuffConfig" -- 皇城占领增益
ConfigData.EmperorWarPointRewardConfig = "EmperorWarPointRewardConfig" -- 皇城领取时间表
ConfigData.HelpInfoConfig = "HelpInfoConfig" -- 皇城帮助信息表
ConfigData.EmperorWarResourceConfig = "EmperorWarResourceConfig" -- 皇城战特惠活动配置表
ConfigData.RedPacketConfig = "RedPacketConfig" --世界 同盟红包配置表


ConfigData.TaskLevelIntervalConfig = "TaskLevelIntervalConfig"  --等级区间生成配置表
ConfigData.MilitaryExploitTaskConfig = "MilitaryExploitTaskConfig"  --军功任务组配置表
ConfigData.MilitaryExploitMissionConfig = "MilitaryExploitMissionConfig"  --重置次数配置表
ConfigData.MilitaryExploitPriceConfig = "MilitaryExploitPriceConfig"  --重置价格配置表

ConfigData.WorldHelpConfig          = "WorldHelpConfig"                 --世界帮助表
ConfigData.WorldTimeConfig          = "WorldTimeConfig"                 --世界活动控制表
ConfigData.RichManorConfig = "RichManorConfig" --富贵豪庄活动配置
ConfigData.RichManorPriceConfig = "RichManorPriceConfig" --富贵豪庄开始或改命消耗配置
ConfigData.RichManorRewardConfig = "RichManorRewardConfig" --富贵豪庄奖励配置
ConfigData.RichManorChangeConfig = "RichManorChangeConfig" --富贵豪庄兑换配置

ConfigData.CustomIconConfig = "CustomIconConfig"

ConfigData.CountryPositionConfig = "CountryPositionConfig" -- 官职配置表
ConfigData.PrisonPositionConfig = "PrisonPositionConfig" -- 监狱配置表

ConfigData.LegionTaskConfig = "LegionTaskConfig"
ConfigData.LegionTaskOomphConfig = "LegionTaskOomphConfig"
ConfigData.LegionTaskPerformanceConfig = "LegionTaskPerformanceConfig"
ConfigData.LegionTaskRankConfig = "LegionTaskRankConfig"
ConfigData.LegionTaskSalaryConfig = "LegionTaskSalaryConfig"


ConfigData.CentralPlainsChapterConfig = "CentralPlainsChapterConfig"
ConfigData.CentralPlainsMissionConfig = "CentralPlainsMissionConfig"
ConfigData.EventEndConfig = "EventEndConfig"

ConfigData.LuckyLotteryDrawConfig = "LuckyLotteryDrawConfig" -- 财源广进  博彩配置
ConfigData.BullionExchangeConfig = "BullionExchangeConfig" -- 财源广进  兑换配置
ConfigData.BullionProportionConfig = "BullionProportionConfig"
ConfigData.CountryPositionConfig = "CountryPositionConfig" -- 官职配置表
ConfigData.PrisonPositionConfig = "PrisonPositionConfig" -- 监狱配置表
ConfigData.CountrySkillConfig = "CountrySkillConfig" -- 国家系统，技能配置表

--聚宝盆
ConfigData.CornucopiaConfig = "CornucopiaConfig"
ConfigData.CornucopiaChargeConfig = "CornucopiaChargeConfig"
ConfigData.CornucopiaRewardConfig = "CornucopiaRewardConfig"

ConfigData.CityRewardConfig ="CityRewardConfig"


ConfigDataManager = {}

function ConfigDataManager:init()
end

function ConfigDataManager:getConfigData(name)
    local config = require("excelConfig." .. name )
    return config
end

--没有搜索KEY时，则默认用ID排序
function ConfigDataManager:getConfigDataBySortKey(name, key)
    local config = self:getConfigData(name)
    local infoList = {}
    for _, info in pairs(config) do
        if info[key] == nil then
            key = "ID"
        end
        table.insert(infoList, info)
    end

    local function comps(a, b)
        return a[key] < b[key]
    end

    table.sort(infoList,comps)

    return infoList

end

function ConfigDataManager:getConfigDataBySortId(name)
    local config = self:getConfigData(name)
    local infoList = {}
    for _, info in pairs(config) do
        table.insert(infoList, info)
    end
    
    local function comps(a, b)
        return a.ID < b.ID
    end
    
    table.sort(infoList,comps)
    
    return infoList
    
end

function ConfigDataManager:getItemConfig()
    return self:getConfigData("ItemConfig")
end

--------通过ID拿数据------------
function ConfigDataManager:getConfigById(name, id)
    local config = self:getConfigData(name)
    return config[id]
end

--------通过ID拿数据+拿配表总长度------------
function ConfigDataManager:getConfigById2(name, id)
    local config = self:getConfigData(name)
    return config[id], #config
end

--------拿一份配表+拿配表总长度------------
function ConfigDataManager:getConfigDataAndLength(name)
    local config = self:getConfigData(name)
    return config, #config
end

--通过多个key-value 找出一个对应的配置数据
function ConfigDataManager:getInfoFindByField(name, fieldMap)
    local config = self:getConfigData(name)
    
    local result = nil
    for _, info in pairs(config) do
        local flag = true
        for key, value in pairs(fieldMap) do
            if info[key] ~= value then
    		    flag = false
    		end
    	end
    	if flag == true then
    	    result = info
    	    break
    	end
    end
    return result
end

--通过多个key-value 找出一个对应的配置数据,并返回最后一项
function ConfigDataManager:getInfoFindByField2(name, fieldMap)
    local config = self:getConfigData(name)
    
    local result = nil
    for _, info in pairs(config) do
        local flag = true
        for key, value in pairs(fieldMap) do
            if info[key] ~= value then
                flag = false
            end
        end
        if flag == true then
            result = info
            break
        end
    end
    return result,config[#config]
end

--------------一个Key去拿数据--------------
function ConfigDataManager:getInfoFindByOneKey(name, key, value)
    if key == "ID" then
        return self:getConfigById(name, value)
    end
    
    if self._oneKeyResultMap == nil then
        self._oneKeyResultMap = {}
    end

    local keySet = name .. "#" .. (key or "") .. "#" .. (value or "")
    local result = self._oneKeyResultMap[keySet]
    if result ~= nil then
        return result
    end
    
    local fieldMap = {}
    fieldMap[key] = value
    local result = self:getInfoFindByField(name,fieldMap)
    self._oneKeyResultMap[key] = result
    return result
end

--------------一个Key去拿数据--------------
function ConfigDataManager:getInfoFindByOneKey2(name, key, value)

    local fieldMap = {}
    fieldMap[key] = value
    local result,result2 = self:getInfoFindByField2(name,fieldMap)
    return result, result2
end

--------------2个Key去拿数据--------------
function ConfigDataManager:getInfoFindByTwoKey(name, key1, value1, key2, value2)

    if self._twoKeyResultMap == nil then
        self._twoKeyResultMap = {}
    end

    local key = name .. "#" .. (key1 or "") .. "#" .. (value1 or "") .. "#" .. (key2 or "") .. "#" .. (value2 or "")
    local result = self._twoKeyResultMap[key]
    if result ~= nil then
        return result
    end
    

    local fieldMap = {}
    fieldMap[key1] = value1
    fieldMap[key2] = value2
    local result = self:getInfoFindByField(name,fieldMap)
    self._twoKeyResultMap[key] = result
    return result
end

function ConfigDataManager:getInfoFindByThreeKey(name, key1, value1, key2, value2, key3, value3)
    local fieldMap = {}
    fieldMap[key1] = value1
    fieldMap[key2] = value2
    fieldMap[key3] = value3
    local result = self:getInfoFindByField(name,fieldMap)
    return result
end

---------------根据提供的函数拿数据--------------
function ConfigDataManager:getInfoFindByFunc(name, func)
    local config = self:getConfigData(name)

    local result = nil
    for _, info in pairs(config) do
        if func(info) then
            result = info
            break
        end
    end
    return result
end

---------------------------------------------------------------
--通过多个key-value 过滤多个对应的配置数据
function ConfigDataManager:getInfoFilterByField(name, fieldMap)
    local config = self:getConfigData(name)

    local array = {}
    for _, info in pairs(config) do
        local flag = true
        for key, value in pairs(fieldMap) do
            if info[key] ~= value then
                flag = false
            end
        end
        if flag == true then
            table.insert(array, info)
        end
    end
    
    return array
end

--------------一个Key去拿数据--------------
function ConfigDataManager:getInfosFilterByOneKey(name, key, value)
    local fieldMap = {}
    fieldMap[key] = value
    local result = self:getInfoFilterByField(name,fieldMap)
    return result
end

--------------2个Key去拿数据--------------
function ConfigDataManager:getInfosFilterByTwoKey(name, key1, value1, key2, value2)
    local fieldMap = {}
    fieldMap[key1] = value1
    fieldMap[key2] = value2
    local result = self:getInfoFilterByField(name,fieldMap)
    return result
end

---------------根据函数去拿数据-----------------
function ConfigDataManager:getInfosFilterByFunc(name, func)
    local config = self:getConfigData(name)

    local result = {}
    for _, info in pairs(config) do
        if func(info) then
            table.insert(result, info)
        end
    end
    return result
end

function ConfigDataManager:getConfigByPowerAndID(type, id)
    local configName = "ItemConfig"
    local iconFolder = "itemIcon"
    local info = nil
    if type == GamePowerConfig.Item then
        -- 道具
    elseif type == GamePowerConfig.Resource then
        -- 资源
        configName = "ResourceConfig"
        iconFolder = "resourceIcon"
    elseif type == GamePowerConfig.Soldier then
        -- 兵种
        configName = "ArmKindsConfig"
        iconFolder = "barrack2Icon"-- "armIcon"        
    elseif type == GamePowerConfig.General then
        -- 武将
        configName = "WarriorsConfig"
        iconFolder = "generalSmall"-- 待改        
    elseif type == GamePowerConfig.Ordnance then
        -- 军械
        configName = "OrdnanceConfig"
        iconFolder = "partsIcon"
    elseif type == GamePowerConfig.OrdnanceFragment then
        -- 军械碎片
        configName = "OrdnancePieceConfig"
        iconFolder = "partsIcon"
    elseif type == GamePowerConfig.Counsellor then
        -- 谋士
        configName = "CounsellorConfig"
        iconFolder = "counsellorIcon"
    elseif type == GamePowerConfig.Hero then
        -- 武将（英雄）
        configName = "HeroConfig"
        iconFolder = "heroIcon"
    elseif type == GamePowerConfig.HeroTreasure then
        -- 宝具
        configName = "TreasureBaseConfig"
        iconFolder = "heroTreasureIcon"
    elseif type == GamePowerConfig.HeroTreasureFragment then
        -- 宝具碎片
        configName = "TreasurePieceConfig"
        iconFolder = "heroTreasureIcon"
    elseif type == GamePowerConfig.LimitActivityItem then
        -- 限时活动特殊物品
        configName = "LimitNatureConfig"
        iconFolder = "limitItemIcon"
    elseif type == GamePowerConfig.SoldierBarrack then
        configName = "ArmKindsConfig"
        iconFolder = "barrackIcon"
    elseif type == GamePowerConfig.Skill then
        configName = "SkillConfig"
        iconFolder = "skillIcon"
    elseif type == GamePowerConfig.Building or type == GamePowerConfig.Command then
        configName = "ArmKindsConfig"
        iconFolder = "building2Icon"

        info = { }
        info.iconFolder = iconFolder
        info.icon = id
        info.color = 1
    elseif type == GamePowerConfig.Collection then
        -- 收藏资源图片
        configName = "ArmKindsConfig"
        iconFolder = "collection"

        info = { }
        info.iconFolder = iconFolder
        info.icon = id
        info.color = 1
    elseif type == GamePowerConfig.HeroFragment then
        configName = "HeroPieceConfig"
        iconFolder = "heroIcon"
    end

    if info == nil then
        info = self:getConfigById(configName, id) or { }
    end
    -- 英雄特殊处理icon
    if type == 409 then
        info.icon = info.icon
    end
    if info.icon == nil then
        -- 容错红包
        info.url = "images/itemIcon/101.png"
    else
        if type == 401 then
            if info.icon >= 20000 then
                -- icon从20000起的道具图标放在文件夹item2Icon下
                iconFolder = "item2Icon"
            end
        end
        if iconFolder == "counsellorIcon" then 
        info.url = "images/" .. iconFolder .. "/" .. info.head .. ".png" 
        else
        info.url = "images/" .. iconFolder .. "/" .. info.icon .. ".png"
        end
    end
    info.iconFolder = iconFolder
    info.icon = info.icon or 0

    if iconFolder == "counsellorIcon" then 
    info.icon = info.head 
    end

    if rawget(info, "quality") ~= nil then
        info.color = info.quality
    end
    -- if type == 402 or type == 404 or type == 405 then
    --     info.color = info.quality
    -- end
    if info.color == nil then
        info.color = 1
    end

    return info
end

-- function ConfigDataManager:getRewardConfigById(id)
--     local rewardConfig = self:getConfigById(ConfigData.FixRewardConfig,id)
--     if rewardConfig == nil then
--         return
--     end
--     local list = StringUtils:jsonDecode(rewardConfig.reward)

--     local configName = "ItemConfig"
--     local type = list[1][1]
--     local contentID = list[1][2]
--     local finalConfig = self:getConfigByPowerAndID(type,contentID)
--     local data = {}
--     data.name = finalConfig.name
--     data.num = list[1][3]
--     data.picId = finalConfig.icon
--     data.iconFolder = finalConfig.iconFolder
--     data.url = finalConfig.url
--     data.color = nil    -- 增加一个返回值
--     data.typeid = contentID
--     data.power = type
--     if type == 401 then
--         data.color = finalConfig.color
--     elseif type  == 404 then
--         data.color = finalConfig.quality
--     else 
--         data.color = finalConfig.color
--     end
--     return  data
-- end

function ConfigDataManager:getRewardConfigById(id)
    local rewardConfig = self:getConfigById(ConfigData.FixRewardConfig,id)
    if rewardConfig == nil then
        return
    end

    local data = self:getRewardConfigByJson(rewardConfig.reward)
    return data
end

function ConfigDataManager:getRewardConfigByJson(jsonData,configName)
    local list = StringUtils:jsonDecode(jsonData)

    local configName = configName or "ItemConfig"
    local type = list[1][1]
    local contentID = list[1][2]
    local finalConfig = self:getConfigByPowerAndID(type,contentID)
    local data = {}
    data.name = finalConfig.name
    data.num = list[1][3]
    data.picId = finalConfig.icon
    data.iconFolder = finalConfig.iconFolder
    data.url = finalConfig.url
    data.color = nil    -- 增加一个返回值
    data.typeid = contentID
    data.power = type
    if type == 401 then
        data.color = finalConfig.color
    elseif type  == 404 then
        data.color = finalConfig.quality
    else 
        data.color = finalConfig.color
    end
    return  data
end

-- 解析奖励数据接口,转成可以直接适配uiicon控件
-- 配表格式：'[[401,4073,1],[401,4074,1],[401,4071,1]]............'
function ConfigDataManager:getRewardsByJson(jsonData,configName)
    local rewardList = StringUtils:jsonDecode(jsonData)
    local rewards = {}

    for _,list in pairs(rewardList) do
        local configName = configName or "ItemConfig"
        local type = list[1]
        local contentID = list[2]
        local finalConfig = self:getConfigByPowerAndID(type,contentID)
        
        local data = {}
        data.name = finalConfig.name
        data.picId = finalConfig.icon
        data.iconFolder = finalConfig.iconFolder
        data.url = finalConfig.url
        data.color = nil    -- 增加一个返回值
        data.power = type
        data.typeid = contentID
        data.num = list[3]
        if type == 401 then
            data.color = finalConfig.color
        elseif type  == 404 then
            data.color = finalConfig.quality
        else 
            data.color = finalConfig.color
        end

        table.insert(rewards,data)
    end
    
    return  rewards
end

-- function ConfigDataManager:isFuncOpen(roleProxy, moduleName, isSysMsg)
--     local toolbarFunc = {}
--     toolbarFunc[1] = {ID = 4, moduleName = 'OpenServerGiftModule'}
--     toolbarFunc[2] = {ID = 5, moduleName = 'TreasureModule'}
--     toolbarFunc[3] = {ID = 6, moduleName = 'MapModule'}

--     local isUnlock = true  --默认值
--     for _,v in pairs(toolbarFunc) do
--         if moduleName == v.moduleName then
--             isUnlock = roleProxy:isFunctionUnLock(v.ID,isSysMsg)
--         end
--     end
--     return isUnlock
-- end


function ConfigDataManager:getChargeProductName(amount, chargeType, platId)

    if chargeType > 0 then
        chargeType = 1  --大于0的，则表示是礼包类型的
    end
    local info = self:getInfoFindByThreeKey(ConfigData.ChargeGoodsConfig, 
        "limit", amount, "platform", platId, "type", chargeType)

    local name = amount * 10 .. "元宝"
    if info ~= nil then
        name = tostring(info.name)
    end


    -- local info = self:getInfoFindByTwoKey(ConfigData.ChargeGoodsConfig, 
    --     "limit", amount, "type", chargeType)
    -- local name = amount*10 .. "元宝"
    -- if info ~= nil then

    --     name = info.name + info.giftGold or 0
    --     return name..(info.unit or "")
    -- end

    return name
end

function ConfigDataManager:getChargeProductId(amount,chargeType,platId)

    if chargeType > 0 then
        chargeType = 1  --大于0的，则表示是礼包类型的
    end

    print("getChargeProductId", amount,chargeType,platId)

    local info = self:getInfoFindByThreeKey(ConfigData.ChargeGoodsConfig, 
        "limit", amount, "platform", platId, "type", chargeType)

    local code = ""
    if info ~= nil then
        code = tostring(info.code)
    end

    -- local info = self:getInfoFindByTwoKey(ConfigData.ChargeGoodsConfig, 
    --     "limit", amount, "platform", platId)
    
    -- local code = nil
    -- if info ~= nil then
    --     code = tostring(info.code)
    -- end

    return code
end

function ConfigDataManager:setImgQuality(img,index)
    if img == nil then
        return
    end
    -- local url = "images/gui/Frame_prop_"..index..".png"
    local url = "images/newGui2/Frame_prop_1.png"
    TextureManager:updateImageView(img,url)
end

function ConfigDataManager:getChargeProductGroup(platform,speName)
    local totalStr = ""
    for _,v in pairs(ConfigDataManager:getConfigData("ChargeGoodsConfig")) do
        local code = v.code
        if  platform == v.platform then -- string.find(code,speName) ~= nil and --直接加渠道
            totalStr = totalStr..code..","
        end
    end
    if string.len(totalStr) >= 1 then
        return string.sub(totalStr,1,-2)
    end
end


--从RedPacketConfig中拿取红包数据（根据红包配置id）
function ConfigDataManager:getRedPacketInfoById(redPacketId)
    local redPacketInfo = self:getConfigById("RedPacketConfig",redPacketId)
    return redPacketInfo
end

--根据红包道具id获取物品id信息
function ConfigDataManager:getRedItemInfo(itemId)
    local itemInfo = self:getConfigById("ItemConfig",itemId)
    local effect = StringUtils:jsonDecode(itemInfo.effect)
    local redPacketId = effect[1][1]
    itemInfo.redPacketId = redPacketId
    return itemInfo
end 

---[[
--富贵豪庄相关配置
--根据服务端给的活动effectid获取活动信息
function ConfigDataManager:getRichManorInfo(effectID)
    for _,v in pairs(ConfigDataManager:getConfigData("RichManorConfig")) do
        if v.effectID == effectID then
            return v
        end 
    end
    return false
end
--获取价格信息
function ConfigDataManager:getRichManorPriceInfo(priceId,randomTimes)
    local randomTimes = randomTimes or 0
    for _,v in pairs(ConfigDataManager:getConfigData("RichManorPriceConfig")) do
        if v.priceID == priceId and v.randomTimes == randomTimes then
            return v
        end 
    end
    return false
end

--获取奖励信息
function ConfigDataManager:getRichManorRewardInfo(rewardGroup,diceNum)
    for _,v in pairs(ConfigDataManager:getConfigData("RichManorRewardConfig")) do
        if v.rewardGroup == rewardGroup and v.diceNum == diceNum then
            return v
        end 
    end
    return false
end 

--获取兑换信息
function ConfigDataManager:getRichManorChangeInfo(exchangeID)
    local changeList = {}
    for _,v in pairs(ConfigDataManager:getConfigData("RichManorChangeConfig")) do
        if v.exchangeID == exchangeID then--and v.exchangeLimit > 0 then
            if v.exchangeLimit ~= 0 then
                v.isTimeLimit = true
            else
                v.isTimeLimit = false
            end 
            table.insert(changeList,v)
        end 
    end
    return changeList
end 
--]]

